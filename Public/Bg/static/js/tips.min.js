/**
 * LBS iTips (仿iPhone界面版) 
 * Date: 2015-10-25
**/
;(function(){window.Tips={_create:function(){if(!this.Box){var a=document.getElementsByTagName("body")[0];this.BG=document.createElement("div");this.BG.id="tips_mask";this.Box=document.createElement("div");this.Box.id="tips_box";this.Box.innerHTML='<div id="tips_content"></div><div id="tips_foot"><a href="javascript:;" id="tips_cancel">\u53d6\u6d88</a><a href="javascript:;" id="tips_define">\u786e\u5b9a</a></div>';a.appendChild(this.BG);a.appendChild(this.Box);this.content=this.$("#tips_content");
this.foot=this.$("#tips_foot");this.define=this.$("#tips_define");this.cancel=this.$("#tips_cancel")}},minWidth:250,maxWidth:300,_show:function(){this._fix=!0;this.BG.style.display="block";this.Box.style.display="block";this._css();this._bind()},_hide:function(){this._fix=!1;this.BG.style.display="none";this.Box.style.display="none";this._unbind()},_pos:function(){var a=document,b=a.documentElement,a=a.body;this.pH=b.scrollHeight||a.scrollHeight;this.sY=b.scrollTop||a.scrollTop;this.wW=b.clientWidth;
this.wH=b.clientHeight;"CSS1Compat"!=document.compatMode&&(this.pH=a.scrollHeight,this.sY=a.scrollTop,this.wW=a.clientWidth,this.wH=a.clientHeight)},_css:function(){this._pos();this.BG.style.height=Math.max(this.pH,this.wH)+"px";this.Box.style.width="auto";this.content.style.cssText="float:left";var a=this.content.offsetWidth;this.content.style.cssText="";a<this.minWidth&&(a=this.minWidth);a>this.maxWidth&&(a=this.maxWidth,this.content.style.whiteSpace="normal");this.Box.style.width=a+"px";this.Box.style.marginLeft=
-(a/2)+"px";this.Box.style.top=(this.wH-this.Box.offsetHeight)/2+"px"},_fixSize:function(){var a=this,b=+new Date;this._timeid&&clearInterval(this._timeid);this._timeid=setInterval(function(){if(1E3<+new Date-b)return clearInterval(a._timeid),a._timeid=null,!1;a._css()},250)},_define:function(a){var b=this;this.define.onclick=function(c){c.stopPropagation();if("function"===typeof a)b._hide(),b.Bool=!0,a&&a(b.Bool);else{var d=!1;!1===(a.before&&a.before())&&(d=!0);if(d)return c.stopPropagation(),!1;
b._hide();b.Bool=!0;a.after&&a.after(b.Bool)}}},_cancel:function(a){var b=this;this.cancel.onclick=function(c){c.stopPropagation();b._hide();b.Bool=!1;"function"===typeof a?a&&a(b.Bool):a.after&&a.after(b.Bool)}},_bind:function(){this.Box.focus();this._setEvent()},_unbind:function(){this.Box.blur();this.define.onclick=null;this.cancel.onclick=null;this.define.innerText="\u786e\u5b9a";this.cancel.innerText="\u53d6\u6d88";this._timer&&clearTimeout(this._timer);this._timer=null;this._timeid&&clearInterval(this._timeid);
this._timeid=null},_setEvent:function(){var a=this;this.on(this.BG,"touchmove",function(a){a.preventDefault()});this.on(this.Box,"touchmove",function(a){a.preventDefault()});this.on(this.define,"touchstart",function(b){0>a.define.className.indexOf("tips_hover")&&(a.define.className+=" tips_hover")});this.on(this.define,"touchend",function(b){a.define.className=a.define.className.replace("tips_hover","").trim()});this.on(this.cancel,"touchstart",function(b){0>a.cancel.className.indexOf("tips_hover")&&
(a.cancel.className+=" tips_hover")});this.on(this.cancel,"touchend",function(b){a.cancel.className=a.cancel.className.replace("tips_hover","").trim()});this.on(window,"resize",function(b){a._fix&&a._fixSize()})},_setBtn:function(a,b){this.foot.style.display="block";this.define.style.display="";this.cancel.style.display="";switch(parseInt(a)){case 1:this.define.className="tips_define";this.cancel.style.display="none";"function"===typeof b?(this.define.innerText="\u786e\u5b9a",this._define(function(){b&&
b()})):(this.define.innerText=b.define||"\u786e\u5b9a",this._define(b));break;case 2:this.define.className="";"function"===typeof b?(this.define.innerText="\u786e\u5b9a",this.cancel.innerText="\u53d6\u6d88",this._define(function(a){b&&b(a)}),this._cancel(function(a){b&&b(a)})):(this.define.innerText=b.define||"\u786e\u5b9a",this.cancel.innerText=b.cancel||"\u53d6\u6d88",this._define(b),this._cancel(b));break;case 0:this.foot.style.display="none",this.define.style.display="none",this.cancel.style.display=
"none"}},_setContent:function(a){this.content.innerHTML=a+""},_setOption:function(a,b,c){var d="";this._create();"string"===typeof a||"number"===typeof a?(d=a||"",this._setBtn(b,function(a){c&&c(a)})):(a=a||{},d=a.content||"",this._setBtn(b,a));this._setContent(d);this._show()},_setTime:function(a,b){var c=0,d=this,c="string"===typeof a?b:a.time;0<parseInt(c)&&(this._timer=setTimeout(function(){d._hide()},1E3*c))},_create2:function(){if(!this.loadBox){var a=document.getElementsByTagName("body")[0];
this.loadMask=document.createElement("div");this.loadMask.id="tips_loadMask";this.loadBox=document.createElement("div");this.loadBox.id="tips_loadBox";a.appendChild(this.loadMask);a.appendChild(this.loadBox)}},_css2:function(){this._pos();this.loadMask.style.height=Math.max(this.pH,this.wH)+"px";this.loadBox.style.marginLeft=-(this.loadBox.offsetWidth/2)+"px";this.loadBox.style.marginTop=-(this.loadBox.offsetHeight/2)+"px"},_set2:function(a){this.loadBox.innerText=a||"\u52a0\u8f7d\u4e2d"},_bind2:function(){this.on(this.loadMask,
"touchmove",function(a){a.preventDefault()});this.on(this.loadBox,"touchmove",function(a){a.preventDefault()})},show:function(a){this._create2();this._set2(a);this.loadMask.style.display="block";this.loadBox.style.display="block";this._bind2();this._css2()},hide:function(){this.loadMask.style.display="none";this.loadBox.style.display="none"},on:function(a,b,c){a.addEventListener(b,c,!1)},off:function(a,b,c){a.removeEventListener(b,c,!1)},$:function(a){return document.querySelector(a)},alert:function(a,
b){this._setOption(a,1,b)},confirm:function(a,b){this._setOption(a,2,function(a){b&&b(a)})},open:function(a,b){this._setOption(a,0);this._setTime(a,b)},close:function(){this._hide()}}})();